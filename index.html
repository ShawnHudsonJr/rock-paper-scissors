<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <div id="buttons">
        <button class="rock">Rock</button>
        <button class="paper">Paper</button>
        <button class="scissors">Scissors</button>
    </div>
    <div id="results">
        <h3 class="score"></h3>
        <h3 class="playerResult"></h3>
        <h3 class="computerResult"></h3>
        <h3 class="gameOver"></h3>
    </div>

    <script>
        //Keep track of score
        let playerScore = 0;
        let computerScore = 0;
        let computerSelection;
        let playerSelection;

        //Rock Button
        const rock = document.querySelector('.rock');
        rock.addEventListener('click', function() {
            playerSelection = "rock";
            game();
        });

        //Paper Button
        const paper = document.querySelector('.paper');
        paper.addEventListener('click', function() {
            playerSelection = "paper";
            game();
        });

        //Scissors Button
        const scissors = document.querySelector('.scissors');
        scissors.addEventListener('click', function() {
            playerSelection = "scissors";
            game();
        });
        const score = document.querySelector(".score");
        const playerResult = document.querySelector(".playerResult");
        const computerResult = document.querySelector(".computerResult");
        const gameOver = document.querySelector(".gameOver");

        //Main game loop
        
         function game() {

            // Run game up until score reaches 5
            if ((playerScore < 5) && (computerScore < 5)) {
                playRound(playerSelection, computerSelection);
                //log score
                playerResult.textContent = ("Player score: " + playerScore);
                computerResult.textContent = ("AI Score: " + computerScore);
            }
         }

    // Round function
        function playRound(playerSelection, computerSelection) {

            //computer chooses its play (getComputerChoice)
            let getComputerChoice = getRandomInt(3);
            
            //choose random play (0-2)
            if (getComputerChoice === 0) {
                computerSelection = 'rock';
            } else if (getComputerChoice === 1) {
                computerSelection = 'paper';
            } else if (getComputerChoice === 2) {
                computerSelection = 'scissors';
            }

        //compare answers

            // if same answer
            if (computerSelection === playerSelection) {
                score.textContent = "Tie!";
            // if rock beats scissors
            } else if ((computerSelection === 'rock') && (playerSelection === 'scissors')) {
                ++computerScore;
                score.textContent = "Rock crushes Scissors";
            } else if ((playerSelection === 'rock') && (computerSelection === 'scissors')) {
                ++playerScore;
                score.textContent = "Rock crushes Scissors";
            }
            // if paper beats rock
            else if ((computerSelection === 'paper') && (playerSelection === 'rock')) {
                ++computerScore;
                score.textContent = "Paper covers Rock";
            } else if ((playerSelection === 'paper') && (computerSelection === 'rock')) {
                ++playerScore;
                score.textContent = "Paper covers Rock";
            }
            // if scissors beats paper
            else if ((computerSelection === 'scissors') && (playerSelection === 'paper')) {
                ++computerScore;
                score.textContent = "Scissors cut Paper";
            } else if ((playerSelection === 'scissors') && (computerSelection === 'paper')) {
                ++playerScore;
                score.textContent = "Scissors cut Paper";
            }

            // Check for game completion
            if ((playerScore === 5) || (computerScore === 5)) {
                gameOver.textContent = "Game Over! Refresh page to play again";
            }
        }

        //Random number generator (0-2)
        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
        }

    </script>
    
</body>
</html>